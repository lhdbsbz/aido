feat(gateway): refactor message distribution mechanism

- enhance connection manager for better message handling
- update protocol and server for improved message routing
- optimize gateway web UI
